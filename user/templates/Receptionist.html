{% extends 'layout2.html' %}
{% load static %}

{% block content %}
<!-- Add a wrapper container for the content to manage the footer position -->
<div class="content-wrapper">
    <!-- Staff table container -->
    <div class="staff-container">
        <h2>Receptionist</h2>

        <!-- Link to external CSS file -->
        <link rel="stylesheet" href="{% static 'Menu_view.css' %}">

        <!-- Renamed table to staff-table-detail -->
        <table class="staff-table-detail">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Service</th>
                    <th>วันและเวลา</th>
                    <th>สถานะใบเสร็จ</th>
                    <th>QR receipt </th> <!-- New column for receipt status -->
                    <th>การอนุมัติ</th> <!-- New column for approval status -->
                    <th>การกระทำ</th>
                </tr>
            </thead>
            <tbody>
                <!-- Example dynamic data -->
                {% for item in bookings %}
                <tr>
                    <td>{{ item.booking_id }}</td>
                    <td>{{ item.service }}</td>
                    <td>{{ item.date }} {{ item.time_slot }}</td>
                    <td>{{ item.status_on }}</td>
                    <td>{{ item.test }}</td>
                    <td>
                        <a href ="{%url 'approve_payment' item.booking_detail_id %}"class="approve-btn">อนุมัติ</a>
                            </br>
                            </br>
                        <a href ="{%url 'decline_payment' item.booking_detail_id %}"class="decline-btn">ไม่อนุมัติ</a> 
                    </td>
                    <td>
                        <a href ="{%url 'cancel_payment' item.booking_detail_id %}"class="cancel-btn">ยกเลิก</a>
                    </td>
                </tr>
                {% endfor %}
                <!-- Static data example -->
            </tbody>
        </table>
    </div>
</div>

<!-- Link to JS file -->
<script src="{% static 'Menu_view.js' %}"></script>

<script>
    // Dynamic JS example (This is where dynamic behavior can be added later)
    // Example: Handle approval button click dynamically
    document.querySelectorAll('.approve-btn').forEach(button => {
        button.addEventListener('click', function() {
            // Code to handle approval logic (e.g., send request to the server to update approval status)
            alert("Approved!");
        });
    });

    document.querySelectorAll('.reject-btn').forEach(button => {
        button.addEventListener('click', function() {
            // Code to handle rejection logic (e.g., send request to the server to update rejection status)
            alert("Rejected!");
        });
    });

    // Cancel button functionality (Dynamic behavior can be added here as well)
    document.querySelectorAll('.cancel-btn').forEach(button => {
        button.addEventListener('click', function() {
            // Code to handle cancel logic
            alert("Cancelled!");
        });
    });
</script>

{% endblock %}
