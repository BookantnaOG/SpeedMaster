{% extends 'layout.html' %}
{% load static %}

{% block content %}
<div class="service-status-container">
    <link rel="stylesheet" href="{% static 'Menu_View.css' %}">
    <h2>р╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╕Ър╕гр╕┤р╕Бр╕▓р╕г</h2>
    <div class="progress-and-icons-container">
        <!-- Status Icons -->
        <div class="status-progress">
            <button class="status-item" id="status1" onclick="showDetails('status1')">ЁЯУЕ</button>
            <div class="connector-line" id="connector1"></div>
            <button class="status-item" id="status2" onclick="showDetails('status2')">ЁЯЪЧ</button>
            <div class="connector-line" id="connector2"></div>
            <button class="status-item" id="status3" onclick="showDetails('status3')">тЬЕ</button>
        </div>
    </div>

    <!-- Status Details Boxes -->
    <div id="status1-details" class="status-details-box">
        <h3>р╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╕Ир╕нр╕З</h3>
        <p>р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ър╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Ър╕гр╕┤р╕Бр╕▓р╕г...</p>
    </div>
    <div id="status2-details" class="status-details-box">
        <h3>р╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╕Чр╕│р╕Др╕зр╕▓р╕бр╕кр╕░р╕нр╕▓р╕Ф</h3>
        <p>р╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕│р╕Др╕зр╕▓р╕бр╕кр╕░р╕нр╕▓р╕Фр╣Вр╕Ыр╕гр╕Фр╕гр╕нр╕Лр╕▒р╕Бр╕Др╕гр╕╣р╣И</p>
        <!-- Service provider details -->
        <div class="provider-info">
            <img src="{% static 'User1.jpg' %}" alt="Profile Picture" class="profile-img">
            <p class="provider-name">р╕Щр╕гр╕▓р╕Шр╕┤р╕Ы р╕Юр╕гр╕лр╕бр╕Ыр╕гр╕░р╣Др╕Бр╣И</p>
        </div>
    </div>
    <div id="status3-details" class="status-details-box">
        <h3>р╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ</h3>
        <p>р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ър╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ...</p>
    </div>
</div>

<script>
let currentProgress = 0;

function showDetails(statusId) {
    const statuses = ['status1', 'status2', 'status3'];
    const connectors = ['connector1', 'connector2'];

    // Reset all status items to their initial state
    statuses.forEach(status => {
        document.getElementById(status).classList.remove('completed');
        document.getElementById(status).classList.remove('active');
        document.getElementById(status).classList.add('pending');
    });

    // Reset connector lines
    connectors.forEach(connector => {
        document.getElementById(connector).style.backgroundColor = '#ccc';
    });

    // Set the status of the clicked button and show its details
    if (statusId === 'status1') {
        document.getElementById('status1').classList.add('completed');
        updateConnectors(33);
        toggleBox('status1-details');
        // Hide other status boxes
        document.getElementById('status2-details').style.display = 'none';
        document.getElementById('status3-details').style.display = 'none';
    } else if (statusId === 'status2') {
        document.getElementById('status1').classList.add('completed');
        document.getElementById('status2').classList.add('completed');
        document.getElementById('connector1').style.backgroundColor = '#4CAF50'; // Change connector line color to green
        updateConnectors(66);
        toggleBox('status2-details');
        // Hide other status boxes
        document.getElementById('status1-details').style.display = 'none';
        document.getElementById('status3-details').style.display = 'none';
    } else if (statusId === 'status3') {
        document.getElementById('status1').classList.add('completed');
        document.getElementById('status2').classList.add('completed');
        document.getElementById('status3').classList.add('completed');
        document.getElementById('connector1').style.backgroundColor = '#4CAF50';
        document.getElementById('connector2').style.backgroundColor = '#4CAF50'; // Change last connector line color to green
        updateConnectors(100);
        toggleBox('status3-details');
        // Hide other status boxes
        document.getElementById('status1-details').style.display = 'none';
        document.getElementById('status2-details').style.display = 'none';
    }
}

function toggleBox(statusDetailId) {
    const box = document.getElementById(statusDetailId);
    if (box.style.display === 'block') {
        box.style.display = 'none';
    } else {
        box.style.display = 'block';
    }
}

function updateConnectors(progress) {
    if (progress >= 33) {
        document.getElementById('connector1').style.backgroundColor = '#4CAF50';
    }
    if (progress >= 66) {
        document.getElementById('connector2').style.backgroundColor = '#4CAF50';
    }
}
</script>

{% endblock %}
