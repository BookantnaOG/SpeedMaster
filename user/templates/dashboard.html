{% extends 'layout.html' %}
{% load static %}

{% block content %}

<!-- Link to specific register CSS -->
<link rel="stylesheet" href="{% static 'dashboard.css' %}">
<script src="{% static 'dashboard.js' %}"></script>
<div class="profile-container">
    <h2>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</h2>
    <form class="profile-form" method="POST" action="{% url 'edit_profile' %}">
        {% csrf_token %}
        <div class="profile">
            <img src="{% static 'Register_image_page.jpg' %}" alt="Profile Picture">
            <p>ID: {{ context.id }}</p>

            <label for="first-name">First Name</label>
            <input type="text" id="first-name" name="first_name" placeholder="{{ context.firstname }}" value="">
            
            <label for="last-name">Last Name</label>
            <input type="text" id="last-name" name="last_name" placeholder="{{ context.lastname }}" value="">
            
            <label for="email">Email</label>
            <input type="text" id="email" name="email" placeholder="{{ context.email }}" value="">
        </div>
        <div class="buttons">
            <button type="submit" class="edit-btn button-adjust" onclick="toggleEdit()">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
        
        </div>
    </form>
    <div class="buttons">
        <button type="button" class="edit-btn button-adjust" onclick="addTel()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå</button>
        <button type="submit" class="save-btn button-adjust" style="display:none;">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
        <button type="button" class="change-pass-btn" onclick="changePassword()">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</button>
        <button type="button" class="delete-btn" onclick="deleteAccount()">‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button>
    </div>

    <div class="service-status-container">
        <h2>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h2>
        <div class="progress-and-icons-container">
            <!-- Status Icons -->
            <div class="status-progress">
                <button class="status-item" id="status1" onclick="showDetails('status1')">üìÖ</button>
                <div class="connector-line" id="connector1"></div> <!-- Line connecting to the next status -->
                <button class="status-item" id="status2" onclick="showDetails('status2')">üöó</button>
                <div class="connector-line" id="connector2"></div>
                <button class="status-item" id="status3" onclick="showDetails('status3')">‚úÖ</button>
            </div>
        </div>
    </div>
    
    <!-- Status Details Modal -->
    <div id="status1-details" class="status-details-modal">
        <div class="modal-content">
            <span class="close" onclick="closeDetails('status1')">&times;</span>
            <h3>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h3>
            <p>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£...</p>
        </div>
    </div>
    <div id="status2-details" class="status-details-modal">
        <div class="modal-content">
            <span class="close" onclick="closeDetails('status2')">&times;</span>
            <h3>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î</h3>
            <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏ã‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</p>
            <!-- Service provider details -->
            <div class="provider-info">
                <img src="{% static 'User1.jpg' %}" alt="Profile Picture" class="profile-img">  
                <p class="provider-name">‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏õ ‡∏û‡∏£‡∏´‡∏°‡∏õ‡∏£‡∏∞‡πÑ‡∏Å‡πà</p>
            </div>
        </div>
    </div>
   
    
    <div id="status3-details" class="status-details-modal">
        <div class="modal-content">
            <span class="close" onclick="closeDetails('status3')">&times;</span>
            <h3>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</h3>
            <p>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô...</p>
        </div>
    </div>

</div>

<script>
    let currentProgress = 0;

    function showDetails(statusId) {
        const statuses = ['status1', 'status2', 'status3'];
        const connectors = ['connector1', 'connector2'];

        // Reset all buttons to pending status first
        statuses.forEach((status, index) => {
            document.getElementById(status).classList.remove('completed', 'active');
            document.getElementById(status).classList.add('pending');
            if (index < connectors.length) {
                document.getElementById(connectors[index]).style.backgroundColor = '#ccc'; // Reset connector line color
            }
        });

        // Set the status of the clicked button
        if (statusId === 'status1') {
            document.getElementById('status1').classList.add('completed');
            updateConnectors(33);
            document.getElementById('status1-details').style.display = 'block'; // Show modal
        } else if (statusId === 'status2') {
            document.getElementById('status1').classList.add('completed');
            document.getElementById('status2').classList.add('completed');
            document.getElementById('connector1').style.backgroundColor = '#4CAF50'; // Change connector line color to green
            updateConnectors(66);
            document.getElementById('status2-details').style.display = 'block'; // Show modal
        } else if (statusId === 'status3') {
            document.getElementById('status1').classList.add('completed');
            document.getElementById('status2').classList.add('completed');
            document.getElementById('status3').classList.add('completed');
            document.getElementById('connector1').style.backgroundColor = '#4CAF50';
            document.getElementById('connector2').style.backgroundColor = '#4CAF50'; // Change last connector line color to green
            updateConnectors(100);
            document.getElementById('status3-details').style.display = 'block'; // Show modal
        }
    }

    function updateConnectors(progress) {
        // This function updates the connector lines based on the completion status
        // The progress is mapped to the percentage of the progress for the connectors
        if (progress >= 33) {
            document.getElementById('connector1').style.backgroundColor = '#4CAF50';
        }
        if (progress >= 66) {
            document.getElementById('connector2').style.backgroundColor = '#4CAF50';
        }
    }

    function closeDetails(statusId) {
        document.getElementById(statusId + '-details').style.display = 'none'; // Hide modal
    }
</script>

{% endblock %}
